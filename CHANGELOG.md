# 更新日志

## [v1.2.3] - 2025-01-15

### 🎨 界面优化

#### 优化单据基本信息字段显示顺序
- **改进内容**: 
  - 调整单据基本信息字段的显示顺序，使其与配置文件中的`document_info_fields`顺序保持一致
  - 移除基于优先级的字段排序逻辑，改为完全按照配置顺序显示
- **技术实现**:
  - 修改`view.py`中`_create_field_display_layout`方法的字段排序逻辑
  - 从配置管理器获取`document_info_fields`的顺序并应用到显示逻辑中
- **用户体验**: 使界面显示与配置文件保持一致，提高用户配置的可预测性和直观性
- **影响范围**: 单据基本信息显示区域

## [v1.2.2] - 2025-01-14

### 🎨 界面优化

#### 统一基本信息字段布局
- **改进内容**: 
  - 将单据基本信息区域的字段显示从每行4个字段调整为每行6个字段
  - 调整子因子基本信息布局，与单据基本信息保持一致，采用每行6个字段的Grid布局
- **技术实现**:
  - 修改 `view.py` 中 `_create_field_display_layout` 方法的 `fields_per_row` 参数从4改为6
  - 重构 `SubFactorDetailView` 类的 `display_basic_info` 方法，使用与 `DocumentInfoView` 一致的Grid布局
  - 移除子因子基本信息区域的固定高度限制，改为自适应内容高度
  - 保持Grid布局的等宽分布和对齐效果
- **用户体验**: 在相同空间内显示更多字段信息，提高信息密度和查看效率，统一界面风格
- **影响范围**: 单据基本信息和子因子基本信息显示区域

#### 修复字段显示布局问题
- **问题描述**: 加载数据后仅显示"业务代码"一个字段，其他字段未显示
- **根本原因**: Canvas滚动容器与Grid布局混合使用导致布局冲突
- **解决方案**:
  - 移除 `display_info` 和 `show_default_info` 方法中的Canvas滚动区域
  - 简化布局逻辑，直接在主框架上使用Grid布局
  - 修复悬停效果中引用不存在变量的错误
- **技术改进**: 统一使用Grid布局，避免Pack和Grid布局混用问题

### 🔧 代码优化
- 简化字段显示布局代码结构
- 提高布局稳定性和可维护性
- 优化字段对齐算法

---

## [v1.2.1] - 2025-01-13

### 🐛 Bug修复

#### 修复启动时表格字段显示问题
- **问题描述**: 程序启动时数据表格中没有显示配置的字段，只有加载数据后才显示
- **根本原因**: 
  - 视图层在DataFrame为空时不显示任何列标题
  - 控制器层基于空的df.columns生成显示名称映射，导致映射为空
- **解决方案**:
  - 修改 `view.py` 中的 `display_data_table` 方法，添加 `columns_config` 参数
  - 当DataFrame为空但有列配置时，显示配置的列标题和中文名称
  - 修改 `controller.py` 中的列名映射逻辑，使用配置的 `columns` 而不是 `df.columns`
- **影响范围**: 视图层和控制器层
- **用户体验**: 启动时即可看到表格结构和字段含义，无需等待数据加载

### 📝 文档更新
- 更新 README.md 故障排除部分，添加表格字段显示问题的解决方案
- 更新 development_plan.md 开发计划，记录此次修复的详细信息
- 创建 CHANGELOG.md 文件，建立版本更新记录机制

### 🔧 技术改进
- 优化表格初始化逻辑，支持空数据状态下的字段显示
- 改进列宽计算算法，兼容空数据和有数据两种状态
- 增强数据表格的健壮性和用户体验

---

## [v1.2.0] - 2025-01-12

### ✨ 新功能
- 实现配置管理界面，支持可视化配置编辑
- 添加搜索过滤功能，支持实时数据表格过滤
- 实现数据复制功能，支持单元格和整行JSON复制

### 🐛 Bug修复
- 修复控制台AttributeError错误
- 优化内存使用和性能
- 完善异常处理和日志系统

### 📚 文档
- 完善开发设计文档
- 更新用户使用说明
- 添加故障排除指南

---

## [v1.1.0] - 2025-01-10

### ✨ 新功能
- 实现基础的数据加载和显示功能
- 支持层级数据结构展示
- 实现因子分类和子因子管理

### 🎨 界面优化
- 采用微软雅黑字体，提升中文显示效果
- 优化界面布局和颜色搭配
- 实现现代化的UI设计

---

## [v1.0.0] - 2025-01-08

### 🎉 首次发布
- 基础项目架构搭建
- 实现MVC设计模式
- 基础数据处理功能
- Tkinter界面框架